(this.webpackJsonprestaurant=this.webpackJsonprestaurant||[]).push([[0],{23:function(e,t,a){e.exports=a(61)},28:function(e,t,a){},29:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),s=a.n(o),c=(a(28),a(2)),i=a(11);a(29);function l(){return document.body.className="background",document.title="Restaurant",n.a.createElement("div",{className:"center",id:"main_box"},n.a.createElement("p",{id:"welcome_label"},"WELCOME"),n.a.createElement("p",{className:"emphasized",id:"main_logo"},"Restaurant"),n.a.createElement("br",null),n.a.createElement("p",{id:"info"},"Our restaurant can be privatized from Tuesday to Saturday, for lunch and dinner.",n.a.createElement("br",null),"Our parking valet is always available.",n.a.createElement("br",null),"All gentlemen are requested to wear a jacket.",n.a.createElement("br",null),"We accept any kind of payment method, except checks."))}var u=a(3),d=a.n(u),m=a(4),p=a(1),g=a(13),b=a(7),E=a(8),f={None:0,Unauthorized:401,Forbidden:403,NotFound:404,NotAcceptable:406,ServerError:500,ConnecionError:888},h={GET:0,POST:1,PUT:2,DELETE:3},y={Undefined:0,NotLoaded:1,Loading:2,Loaded:3},v=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"makeARequest",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a,r){var n,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n={body:r},(o=localStorage.getItem("jwt"))&&(n.headers={Authorization:"Bearer ".concat(o)}),e.t0=a,e.next=e.t0===h.POST?7:e.t0===h.PUT?9:e.t0===h.DELETE?11:13;break;case 7:return n.method="POST",e.abrupt("break",14);case 9:return n.method="PUT",e.abrupt("break",14);case 11:return n.method="DELETE",e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:return e.next=16,fetch("/api/v1"+t,n);case 16:s=e.sent,e.t1=s.status,e.next=403===e.t1?20:401===e.t1?21:406===e.t1?22:500===e.t1?23:404===e.t1?24:25;break;case 20:return e.abrupt("return",{error:f.Forbidden});case 21:return e.abrupt("return",{error:f.Unauthorized});case 22:return e.abrupt("return",{error:f.NotAcceptable,data:s.json()});case 23:return e.abrupt("return",{error:f.ServerError});case 24:return e.abrupt("return",{error:f.NotFound});case 25:return e.abrupt("break",26);case 26:return e.t2=f.None,e.next=29,s.json();case 29:return e.t3=e.sent,e.abrupt("return",{error:e.t2,data:e.t3});case 33:return e.prev=33,e.t4=e.catch(0),console.log(e.t4),e.abrupt("return",{error:f.ConnecionError});case 37:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"ErrorTypes",get:function(){return f}},{key:"Method",get:function(){return h}},{key:"DataLoadingStatus",get:function(){return y}}]),e}();function _(e,t){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(d.a.mark((function e(t,a){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.makeARequest("/login",v.Method.POST,t);case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return",r);case 6:if((n=r.data)&&!n.error_code){e.next=9;break}return e.abrupt("return",r);case 9:return console.log(r),S(n.token),window.location=a||"/",e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function S(e){localStorage.setItem("jwt",e);var t=e.split(".")[1],a=window.atob(t);localStorage.setItem("user",a)}function k(){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.removeItem("jwt"),localStorage.removeItem("user"),e.next=5,v.makeARequest("/logout",v.Method.POST);case 5:document.location="/",e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),alert("Server error occured");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(e){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.makeARequest("/register",v.Method.POST,t);case 3:return(a=e.sent).error||a.data.error_code||(window.location="/auth/login"),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function O(){try{var e=localStorage.getItem("user");return JSON.parse(e)}catch(t){console.log(t),localStorage.removeItem("jwt"),localStorage.removeItem("user")}}a(42);var T={None:0,Multiple:1,Text:2,TextArea:3,Selector:4,File:5,Button:6},j={Default:0,Red:1,Green:2};function A(e){var t=e.inputs,a=e.cb,r=e.labels;return n.a.createElement(n.a.Fragment,null,r.message.text&&""!==r.message.text?n.a.createElement("div",{className:"shadow card_view form_info"},n.a.createElement("p",{className:"form_info_text"+(r.message.color===j.Red?" form_red":"")+(r.message.color===j.Green?" form_green":"")},r.message.text)):"",n.a.createElement("form",{className:"shadow card_view form",onSubmit:function(e){e.preventDefault(),a(e.target)}},n.a.createElement("p",{className:"emphasized form_legend"},r.legend),function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.map((function(r,o){return n.a.createElement("div",{key:o,className:(a&&0!==o?"form_inline":"")+(a&&o===t.length-1?" form_inline_last":"")},r.type===T.Text?n.a.createElement("input",Object.assign({},r.props,{className:"input_field form_input"})):"",r.type===T.Multiple?n.a.createElement("div",{style:{display:"table"}},n.a.createElement("div",{className:"form_inputs_container"},e(r.inputs,!0))):"",r.type===T.TextArea?n.a.createElement("textarea",Object.assign({},r.props,{className:"input_field form_input form_text_area"})):"",r.type===T.Selector?n.a.createElement("select",r.props,r.disabledOption?n.a.createElement("option",{disabled:!0},r.disabledOption):"",r.options.map((function(e,t){var a={key:t,value:e.value};return n.a.createElement("option",a,e.name)}))):"",r.type===T.File?n.a.createElement(n.a.Fragment,null,n.a.createElement("input",Object.assign({hidden:!0},r.props)),n.a.createElement("div",{className:"button_outter"},n.a.createElement("label",{htmlFor:r.props.id},n.a.createElement("div",{className:"button"},r.label)))):"",r.type===T.Button?n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:r.onClick},r.label)):"")}))}(t),n.a.createElement("div",{className:"button_outter"},n.a.createElement("label",{htmlFor:"submit"},n.a.createElement("div",{id:"submit_button",className:"button"},"Submit"))),n.a.createElement("input",{type:"submit",id:"submit",hidden:!0}),n.a.createElement("p",{className:"form_footer"},r.footer)))}A.InputType=T,A.MessageColor=j;var C=A,I={Empty:"",ServerError:"Server error occured",ConnectionError:"There are some troubles with Your internet connection",NotFound:"Record with such id doesn't exist",Loading:"Loading...",Forbidden:"You have no right to access this page",Unauthorized:function(e){return n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e})},Redirect:function(e){return n.a.createElement(i.a,{to:e})},Saved:"Saved",QueryWithNoResults:"Nothing was found. Try another search term.",NothingToShow:"There's nothing to see at yet",Successfully:"Successfully"},U=Object.assign({LoginFirst:"You must sing in first",IncorrectAuthData:"Login or password was entered incorectly."},I);function R(e){document.body.className="background",document.title="Sign in";var t=Object(r.useState)({inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"username",maxLength:"32",pattern:"^[a-zA-Z0-9]+$",placeholder:"Login",className:"input_field form_input"}},{type:C.InputType.Text,props:{required:!0,type:"password",name:"password",maxLength:"32",placeholder:"Password",className:"input_field form_input"}}],cb:function(e){return u.apply(this,arguments)},labels:{message:{text:U.Empty,color:C.MessageColor.Default},legend:"Sing in",footer:n.a.createElement(n.a.Fragment,null,"Do not have an account? ",n.a.createElement(c.b,{to:"/auth/register"}," Register "))}}),a=Object(p.a)(t,2),o=a[0],s=a[1];function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.MessageColor.Default,a=Object.assign({},o);a.labels.message={text:e,color:t},s(a)}var l=g.parse(e.location.search);function u(){return(u=Object(m.a)(d.a.mark((function e(t){var a,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(U.Empty),a=new FormData(t),r=new URLSearchParams(a),e.next=5,_(r,l.redirect);case 5:if(!(n=e.sent).data){e.next=8;break}return e.abrupt("return");case 8:if(n.error!==v.ErrorTypes.ServerError){e.next=11;break}return i(U.ServerError,C.MessageColor.Red),e.abrupt("return");case 11:if(n.error!==v.ErrorTypes.ConnecionError){e.next=14;break}return i(U.ConnectionError,C.MessageColor.Red),e.abrupt("return");case 14:i(U.IncorrectAuthData,C.MessageColor.Red);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.info&&"mustLogin"===String(l.info)&&o.labels.message.text!==U.LoginFirst&&(localStorage.removeItem("jwt"),localStorage.removeItem("user"),i(U.LoginFirst)),n.a.createElement("div",{className:"center"},null===localStorage.getItem("jwt")?n.a.createElement(C,o):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"text_container"},"You have already signed in."),n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},"Sign out"))))}a(48);var D={User:0,Waiter:1,Admin:2};function F(e){if(isNaN(e))return"Unknown";switch(Number(e)){case 0:return"User";case 1:return"Waiter";case 2:return"Admin";default:return"Unknown"}}var M=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"getById",value:function(e){return v.makeARequest("/users/"+e)}},{key:"getAll",value:function(e,t,a){var r="/users?numberOfRecordsOnAPage=".concat(a,"&page=");return r+=e||1,t&&(r+="&query="+t),v.makeARequest(r)}},{key:"update",value:function(e){var t=new URLSearchParams;return e.fullname&&t.set("fullname",e.fullname),e.username&&t.set("username",e.username),e.password&&t.set("password",e.password),e.role&&t.set("role",e.role),e.telegramId&&t.set("telegramId",e.telegramId),v.makeARequest("/users/"+e.id,v.Method.PUT,t)}},{key:"deleteById",value:function(e){return v.makeARequest("/users/"+e,v.Method.DELETE)}},{key:"startNewOrder",value:function(e){return v.makeARequest("/users/"+e+"?option=startNewOrder",v.Method.PUT)}},{key:"addItemToCurrentOrder",value:function(e,t){var a=new FormData;return a.set("new_item_to_order",t),v.makeARequest("/users/"+e,v.Method.PUT,a)}},{key:"callWaiter",value:function(e){return v.makeARequest("/callWaiter?user_id="+e)}},{key:"setCurrentOrderCompleted",value:function(e){return v.makeARequest("/users/"+e+"?option=setCurrentOrderCompleted",v.Method.PUT)}},{key:"UserRoles",get:function(){return D}}]),e}();a(49);function q(e){for(var t=e.pagesAmount,a=e.currentPage,r=e.cb,o=[],s=0;s<t;s++)o.push(s+1);return n.a.createElement("div",{id:"pagingButtonsContainer"},t>1?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"leftPageButton",className:"arrow_button",onClick:function(){return r(a-1)},style:{visibility:1===a?"hidden":"visible"}},"<"),"Page\xa0",n.a.createElement("select",{id:"pageSelector",onChange:function(e){return r(Number(e.target.options[e.target.selectedIndex].value))},defaultValue:a},n.a.createElement("option",{disabled:!0},"Pages"),o.map((function(e,t){return n.a.createElement("option",{id:"page"+(t+1),key:t,value:t+1},t+1)}))),"\xa0of ",t,n.a.createElement("div",{id:"rightPageButton",className:"arrow_button",onClick:function(){return r(a+1)},style:{visibility:a===t?"hidden":"visible"}},">")):"")}var z={None:0,ServerError:1,ConnecionError:2,Loading:3};function P(e){document.body.className="",document.title="Users";var t=8,a=Object(r.useState)(z.None),o=Object(p.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)({isLoaded:!1,data:[],pagesAmount:0,query:"",page:1}),u=Object(p.a)(l,2),d=u[0],m=u[1],g=O();if(!g)return I.Unauthorized(e.location.pathname);if(g&&g.role!==M.UserRoles.Admin)return n.a.createElement("div",{className:"center"},I.Forbidden);function b(){d.isLoaded||(s!==z.Loading&&i(z.Loading),M.getAll(d.page,d.query,t).then((function(a){if(a.error)switch(d.isLoaded=!0,a.error){case v.ErrorTypes.Unauthorized:return document.location="/auth/login?info=mustLogin&redirect="+e.location.pathname;case v.ErrorTypes.ConnecionError:i(z.ConnecionError);break;default:i(z.ServerError)}else m({isLoaded:!0,data:a.data.users,pagesAmount:Math.ceil(a.data.numberOfRecords/t),query:d.query,page:d.page}),s!==z.None&&i(z.None),document.getElementById("search_field")&&(document.getElementById("search_field").value=d.query)})))}return d.isLoaded||b(),n.a.createElement(n.a.Fragment,null,s!==z.None?n.a.createElement("div",{className:"center"},s===z.ServerError?I.ServerError:"",s===z.ConnecionError?I.ConnectionError:"",s===z.Loading?I.Loading:""):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"table midMarginTop",id:"table"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d.page=1,d.query=document.getElementById("search_field").value,d.isLoaded=!1,b()}},n.a.createElement("input",{id:"search_field",type:"text",name:"query",placeholder:"Search by username",maxLength:"32",className:"input_field"}),n.a.createElement("input",{id:"search_submit_button",type:"image",src:"/images/search.png",alt:"Search"})),d.data.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"first_table_row table_row"},n.a.createElement("div",{className:"table_cell users_table_cell"},"Username"),n.a.createElement("div",{className:"table_cell users_table_cell"},"Fullname"),n.a.createElement("div",{className:"table_cell users_table_cell"},"Role")),d.data.map((function(e,t){return n.a.createElement(c.b,{key:t,to:"/users/"+e.id,className:"no_link"},n.a.createElement("div",{className:"table_row"},n.a.createElement("div",{className:"table_cell users_table_cell"},e.username),n.a.createElement("div",{className:"table_cell users_table_cell"},e.fullname),n.a.createElement("div",{className:"table_cell users_table_cell"},F(e.role))))}))):n.a.createElement(n.a.Fragment,null,d.query?n.a.createElement("div",{className:"center"},"Nothing was found. Try another search term."):n.a.createElement("div",{className:"center"},"There's nothing to see here at yet"))),n.a.createElement(q,{pagesAmount:d.pagesAmount,cb:function(e){d.page=e,d.isLoaded=!1,b()},currentPage:d.page})))}a(50),a(51);function B(e){var t=e.onConfirm,a=e.onDecline,r=e.message;return n.a.createElement("div",{id:"form_background"},n.a.createElement("div",{className:"center card_view shadow",id:"conf_form"},n.a.createElement("div",null,n.a.createElement("p",{id:"conf_text"},r)),n.a.createElement("div",{id:"buttonBox"},n.a.createElement("div",{className:"button conf_button",onClick:a},"Cancel"),n.a.createElement("div",{className:"button conf_button",onClick:t},"Yes"))))}var V={None:0,ServerError:1,Unauthorized:2,NotFound:3,Loading:4,ConnecionError:5};function W(e){document.body.className="";var t=e.match.params.id,a=Object(r.useState)({isLoaded:!1,data:{}}),o=Object(p.a)(a,2),s=o[0],l=o[1],u=Object(r.useState)(V.Loading),d=Object(p.a)(u,2),m=d[0],g=d[1],b=Object(r.useState)(!1),E=Object(p.a)(b,2),f=E[0],h=E[1];document.title=s.data.fullname?s.data.fullname:"User",s.isLoaded&&s.data.id===t||M.getById(t).then((function(e){var t=e.error;if(t)switch(s.isLoaded=!0,t){case v.ErrorTypes.Unauthorized:g(V.Unauthorized);break;case v.ErrorTypes.ConnecionError:g(V.ConnecionError);break;case v.ErrorTypes.NotFound:g(V.NotFound);break;default:g(V.ServerError)}else{var a=e.data.user;a.showExtended=_.role===M.UserRoles.Admin||_.id===a.id,l({isLoaded:!0,data:a}),g(v.ErrorTypes.None)}}));var y={message:"Are you sure?",onConfirm:function(){M.deleteById(t).then((function(){_.id===s.data.id?k():document.location="/users"}))},onDecline:function(){h(!1)}},_=O();if(console.log(_),!_)return n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e.location.pathname});var N=_.id===t;return n.a.createElement(n.a.Fragment,null,m?n.a.createElement("div",{className:"center"},m===V.ServerError?I.ServerError:"",m===V.Unauthorized?n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e.location.pathname}):"",m===V.ConnecionError?I.ConnecionError:"",m===V.NotFound?I.NotFound:"",m===V.Loading?I.Loading:""):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"greet_background"},n.a.createElement("div",{id:"greet_container"},n.a.createElement("div",{id:"greet_label"},n.a.createElement("p",{className:"emphasized",id:"greetings"},N?"Hi, ":"",s.data.fullname),n.a.createElement("p",{id:"greet_username"},N?"Your ":"","username is\xa0",s.data.username)),N?n.a.createElement("div",{id:"logout_button_outter"},n.a.createElement("div",{className:"button",onClick:k},"Sign out")):"")),n.a.createElement("div",{className:"table",id:"user_table"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"ROLE"),n.a.createElement("div",{className:"feature_detail"},F(s.data.role))),n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"SING UP DATE"),n.a.createElement("div",{className:"feature_detail"},new Date(s.data.registeredAt).toLocaleString())),n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"NUMBER OF ORDERS"),n.a.createElement("div",{className:"feature_detail"},s.data.amountOfOrders))),s.data.showExtended?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"Telegram ID"),n.a.createElement("div",{className:"feature_detail"},s.data.telegramId?s.data.telegramId:"-")),n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"PREFERED LANGUAGE"),n.a.createElement("div",{className:"feature_detail"},"English")),n.a.createElement("div",{className:"feature_item"},n.a.createElement("div",{className:"faded"},"PAYMENT METHOD"),n.a.createElement("div",{className:"feature_detail"},"-"))),n.a.createElement("div",{id:"button_box"},n.a.createElement(c.b,{to:e.location.pathname+"/edit",className:"no_link"},n.a.createElement("div",{className:"button user_action_button"},"Edit")),N?n.a.createElement(c.b,{to:"/orders",className:"button user_action_button no_link"},"Order history"):n.a.createElement(c.b,{to:"/order?user_id="+s.data.id,className:"button user_action_button no_link"},"Current order"),n.a.createElement("div",{className:"button user_action_button",onClick:function(){return h(!0)}},n.a.createElement("font",{style:{color:"red"}},"Delete account")))):""),f?n.a.createElement(B,y):""))}var Y=function(){return document.body.className="background",document.title="Not Found",n.a.createElement("div",{className:"text_container center"},n.a.createElement("p",{className:"big_label"},"The page you're looking",n.a.createElement("br",null),"for can't be found"),n.a.createElement("div",{class:"button_outter"},n.a.createElement(c.b,{to:"/",className:"no_link"},n.a.createElement("div",{class:"button"},"Home"))))},G=Object.assign({LoginIsAlreadyUsed:"Entered login is already used.",PasswordMustMatch:"Passwords must match"},I);function $(){var e=Object(r.useState)({inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"username",maxLength:"32",pattern:"^[a-zA-Z0-9]+$",placeholder:"Login",className:"input_field form_input"}},{type:C.InputType.Text,props:{required:!0,type:"text",name:"fullname",maxLength:"32",placeholder:"Full name",className:"input_field form_input"}},{type:C.InputType.Text,props:{required:!0,type:"password",name:"password",maxLength:"32",placeholder:"Password",className:"input_field form_input"}},{type:C.InputType.Text,props:{required:!0,type:"password",name:"confirm_password",maxLength:"32",placeholder:"Confirm password",className:"input_field form_input"}}],cb:function(e){return l.apply(this,arguments)},labels:{message:{text:G.Empty,color:C.MessageColor.Default},legend:"Sing up",footer:n.a.createElement(n.a.Fragment,null,"Already have an account? ",n.a.createElement(c.b,{to:"/auth/login"}," Login "))}}),t=Object(p.a)(e,2),a=t[0],o=t[1];function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.MessageColor.Red,r=Object.assign({},a);r.labels.message={text:e,color:t},o(r)}if(localStorage.getItem("jwt"))return n.a.createElement(i.a,{to:"login"});function l(){return(l=Object(m.a)(d.a.mark((function e(t){var a,r,n,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(G.Empty),a=new FormData(t),r=new URLSearchParams(a),n=r.get("password"),o=r.get("confirm_password"),n===o){e.next=8;break}return s(G.PasswordMustMatch),e.abrupt("return");case 8:return e.next=10,L(r);case 10:if(!(c=e.sent)||!c.data||c.data.error_code){e.next=13;break}return e.abrupt("return");case 13:if(!c.error){e.next=29;break}e.t0=c.error,e.next=e.t0===v.ErrorTypes.ConnecionError?17:e.t0===v.ErrorTypes.NotAcceptable?19:27;break;case 17:return s(G.ConnectionError),e.abrupt("break",28);case 19:e.t1=Number(c.data.error_code),e.next=7===e.t1?22:24;break;case 22:return s(G.LoginIsAlreadyUsed),e.abrupt("break",26);case 24:return s(G.ServerError),e.abrupt("break",26);case 26:return e.abrupt("break",28);case 27:s(G.ServerError);case 28:return e.abrupt("return");case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.body.className="background",document.title="Registration",n.a.createElement("div",{className:"center"},n.a.createElement(C,a))}a(52);var Z=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"get",value:function(){return v.makeARequest("/restaurant")}},{key:"set",value:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.makeARequest("/restaurant",v.Method.PUT,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function H(){document.body.className="background",document.title="About";var e=Object(r.useState)(I.Empty),t=Object(p.a)(e,2),a=t[0],o=t[1],s=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,data:{}}),i=Object(p.a)(s,2),l=i[0],u=i[1];return l.loadingStatus===v.DataLoadingStatus.NotLoaded&&(l.loadingStatus=v.DataLoadingStatus.Loading,Z.get().then((function(e){e.error?o(I.ServerError):u({loadingStatus:v.DataLoadingStatus.Loaded,data:e.data.restaurant})}))),n.a.createElement("div",{className:"center text_container"},a!==I.Empty?a:n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:l.data.logoUrl,id:"logo",alt:"logo",className:"light_shadow"}),n.a.createElement("p",{className:"emphasized text_container_title"},l.data.name),n.a.createElement("div",{id:"website_version"},"website v. 1.0"),"made by ",n.a.createElement(c.b,{to:"http://t.me/daniilzhyrov",className:"no_link underline"},n.a.createElement("u",null,"Danya Zhyrov")),n.a.createElement("br",null),"supported by ",n.a.createElement(c.b,{to:"https://progbase.herokuapp.com",className:"no_link underline"},n.a.createElement("u",null,"ProgBase")),n.a.createElement("br",null),l.data.contacts,n.a.createElement("br",null),l.data.address))}a(53);function J(){var e=O(),t=Object(r.useState)(I.Empty),a=Object(p.a)(t,2),o=a[0],s=a[1],i=Object(r.useState)(I.Empty),l=Object(p.a)(i,2),u=l[0],d=l[1];return o===I.Empty&&Z.get().then((function(e){e.error?d(I.ServerError):s(e.data.restaurant.name)})),n.a.createElement("nav",{className:"shadow"},u!==I.Empty?n.a.createElement("div",{id:"main_label"},u):n.a.createElement(n.a.Fragment,null,n.a.createElement(c.b,{to:"/",className:"no_link"},n.a.createElement("div",{id:"main_label"},o)),n.a.createElement("div",{id:"container"},e?n.a.createElement(n.a.Fragment,null,n.a.createElement(c.b,{to:"/order",className:"no_link menu_block"},"My order"),n.a.createElement(c.b,{to:"/menu",className:"no_link  menu_block"},"Menu"),isNaN(e.role)||Number(e.role)!==M.UserRoles.Admin?"":n.a.createElement(n.a.Fragment,null,n.a.createElement(c.b,{to:"/users",className:"no_link menu_block"},"Users"),n.a.createElement(c.b,{to:"/settings",className:"no_link menu_block"},"Settings"))):"",n.a.createElement(c.b,{to:"/about",className:"no_link  menu_block"},"About"),e?n.a.createElement(c.b,{to:"/users/"+e.id,className:"no_link  menu_block"},e?e.fullname:""):n.a.createElement(c.b,{to:"/auth/login",className:"no_link  menu_block"},"Login"))))}var Q=Object.assign({PasswordMustMatch:"Passwords must match",Saved:"Saved"},I),K={None:0,Loading:1,ServerError:2,ConnecionError:3,Forbidden:4};function X(e){document.body.className="background";var t,a=O(),o=e.match.params.id,s=Object(r.useState)({isLoaded:!1,data:{}}),c=Object(p.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(K.Loading),m=Object(p.a)(d,2),g=m[0],b=m[1],E=Object(r.useState)({text:Q.Empty,color:C.MessageColor.Default}),f=Object(p.a)(E,2),h=f[0],y=f[1];if(!a)return n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e.location.pathname});function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.MessageColor.Default;y({text:e,color:t})}function N(e){e?(document.getElementById("submit_button").style.opacity=.5,document.getElementById("submit_button").style["pointer-events"]="none"):(document.getElementById("submit_button").style.opacity=1,document.getElementById("submit_button").style["pointer-events"]="auto")}function k(t){var a=new FormData(t),r=new URLSearchParams(a);N(!0),_(Q.Empty);var n=r.get("fullname"),s=r.get("password"),c=r.get("confirm_password"),i=r.get("role");if(s&&0!==s.length&&s!==c)return N(!1),void _(Q.PasswordsNotMatch,C.MessageColor.Red);var l={fullname:n,password:s,role:i,id:o};M.update(l).then((function(t){if(N(!1),t.error)switch(l.isLoaded=!0,t.error){case v.ErrorTypes.Unauthorized:return document.location="/auth/login?info=mustLogin&redirect="+e.location.pathname;case v.ErrorTypes.ConnecionError:return _(Q.ConnecionError);default:return _(Q.ServerError)}S(t.data.jwt),_(Q.Saved);var a=l;a.fullname=n,a.role=i,u({isLoaded:!0,data:a})}))}return document.title=l.data.fullname,a.role!==M.UserRoles.Admin&&a.id!==o?b(K.Forbidden):(!l.isLoaded||l.data.id&&l.data.id!==o)&&M.getById(o).then((function(t){var a=t.error;if(l.isLoaded=!0,a)switch(a){case v.ErrorTypes.NotFound:b(Q.NotFound);break;case v.ErrorTypes.Unauthorized:b(Q.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:b(Q.ConnectionError);break;default:b(v.ErrorTypes.ServerError)}else{var r=t.data.user;u({isLoaded:!0,data:r}),b(K.None)}})),n.a.createElement("div",{className:"center"},g&&""!==g?n.a.createElement("div",{className:"center"},g):n.a.createElement(n.a.Fragment,null,n.a.createElement(C,(t||(t=l),{inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"username",maxLength:"32",pattern:"^[a-zA-Z0-9]+$",placeholder:"Login",defaultValue:t.data.username}},{type:a&&a.role===M.UserRoles.Admin?C.InputType.Selector:C.InputType.None,props:{name:"role",className:"form_selector",defaultValue:isNaN(t.data.role)?M.UserRoles.User:Number(t.data.role)},disabledOption:"Roles",options:Object.values(M.UserRoles).map((function(e){return{value:e,name:F(e)}}))},{type:C.InputType.Text,props:{type:"password",name:"password",maxLength:"32",placeholder:"Password (not reqired)"}},{type:C.InputType.Text,props:{type:"password",name:"confirm_password",maxLength:"32",placeholder:"Confirm password"}}],cb:k,labels:{message:h,legend:"Edit user"}}))))}var ee=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"getAll",value:function(e,t,a){var r="/itemsToOrder?numberOfRecordsOnAPage=".concat(a,"&page=");return r+=e||1,t&&(r+="&query="+t),v.makeARequest(r)}},{key:"insert",value:function(e){return v.makeARequest("/itemsToOrder",v.Method.POST,e)}},{key:"getById",value:function(e){return v.makeARequest("/itemsToOrder/"+e)}},{key:"updateById",value:function(e,t){return v.makeARequest("/itemsToOrder/"+e,v.Method.PUT,t)}},{key:"deleteById",value:function(e){return v.makeARequest("/itemsToOrder/"+e,v.Method.DELETE)}}]),e}(),te=Object.assign({ImageTooLarge:"Selected image is too large. Max image size 5mb."},I);function ae(e){document.body.className="background";var t=O(),a=e.match.params.id,o=Object(r.useState)({isLoaded:!1,data:{}}),s=Object(p.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(te.Loading),d=Object(p.a)(u,2),m=d[0],g=d[1],b=Object(r.useState)({text:te.Empty,color:C.MessageColor.Default}),E=Object(p.a)(b,2),f=E[0],h=E[1];if(!t)return n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e.location.pathname});function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.MessageColor.Default;h({text:e,color:t})}function _(e){e?(document.getElementById("submit_button").style.opacity=.5,document.getElementById("submit_button").style["pointer-events"]="none"):(document.getElementById("submit_button").style.opacity=1,document.getElementById("submit_button").style["pointer-events"]="auto")}function N(t){var r=new FormData(t),n=new URLSearchParams(r),o=n.get("name"),s=n.get("description"),i=n.get("weight"),u=n.get("price");_(!0),h({text:te.Empty}),ee.updateById(a,r).then((function(t){if(_(!1),t.error===v.ErrorTypes.None)h({text:te.Saved,color:C.MessageColor.Green}),l({isLoaded:!0,data:{name:o,description:s,weight:i,price:u}});else switch(c.isLoaded=!0,t.error){case v.ErrorTypes.Unauthorized:g(te.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:y(te.ConnecionError,C.MessageColor.Red);break;case v.ErrorTypes.NotAcceptable:switch(t.data.error_code){case 1:y(te.ImageTooLarge,C.MessageColor.Red)}break;default:y(te.ServerError,C.MessageColor.Red)}}))}return t.role!==M.UserRoles.Admin&&m===te.Empty&&g(te.Forbidden),document.title=c.data.name,t.role!==M.UserRoles.Admin?g(te.Forbidden):(!c.isLoaded||c.data.id&&c.data.id!==a)&&ee.getById(a).then((function(t){var a=t.error;if(c.isLoaded=!0,a)switch(a){case v.ErrorTypes.NotFound:g(te.NotFound);break;case v.ErrorTypes.Unauthorized:g(te.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:g(te.ConnectionError);break;default:g(v.ErrorTypes.ServerError)}else l({isLoaded:!0,data:t.data.item}),g(te.Empty)})),n.a.createElement("div",{className:"center"},m&&""!==m?m:n.a.createElement(C,{inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"name",maxLength:"32",placeholder:"Name",defaultValue:c.data.name}},{type:C.InputType.TextArea,props:{required:!0,type:"text",name:"description",maxLength:"512",placeholder:"Description",defaultValue:c.data.description}},{type:C.InputType.Multiple,inputs:[{type:C.InputType.Text,props:{required:!0,type:"number",name:"weight",maxLength:"32",placeholder:"Weight",defaultValue:c.data.weight}},{type:C.InputType.Text,props:{required:!0,type:"number",name:"price",maxLength:"32",placeholder:"Price",defaultValue:c.data.price}}]},{type:C.InputType.File,label:"Upload item image",props:{type:"file",name:"image",id:"form_image_input",accept:"image/jpeg"}}],cb:N,labels:{message:f,legend:"Edit item"}}))}a(54);var re={None:0,Loading:1,ServerError:2,ConnecionError:3,Unauthorized:4};function ne(e){var t=3;document.body.className="background",document.title="Menu";var a,o=Object(r.useState)(re.Loading),s=Object(p.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)({isLoaded:!1,page:1,pagesAmount:0,query:"",data:[]}),m=Object(p.a)(d,2),g=m[0],b=m[1],E=O();function f(){g.isLoaded||(l!==re.Loading&&u(re.Loading),ee.getAll(g.page,g.query,t).then((function(e){if(e.error)switch(g.isLoaded=!0,e.error){case v.ErrorTypes.ConnecionError:u(re.ConnecionError);break;case v.ErrorTypes.Unauthorized:u(re.Unauthorized);break;default:u(re.ServerError)}else b({page:g.page,query:g.query,isLoaded:!0,pagesAmount:Number(Math.ceil(e.data.amountOfRecords/t)),data:e.data.itemsToOrder}),l!==re.None&&u(re.None),document.getElementById("search_field")&&(document.getElementById("search_field").value=g.query)})))}return E||l!==I.Empty||u(I.Forbidden),E&&(a=E.role===M.UserRoles.Admin),f(),n.a.createElement(n.a.Fragment,null,l!==re.None?n.a.createElement("div",{className:"center"},l===re.ServerError?I.ServerError:"",l===re.Loading?I.Loading:"",l===re.Unauthorized?n.a.createElement(i.a,{to:"/auth/login?info=mustLogin&redirect="+e.location.pathname}):"",l===re.ConnecionError?I.ConnectionError:""):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"table card_view shadow",id:"item_table"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=new FormData(e),a=new URLSearchParams(t);g.query=a.get("query"),g.page=1,g.isLoaded=!1,f()}(e.target)},id:"search_container"},a?n.a.createElement(c.b,{id:"add_new_item_button",className:"button no_link",to:e.location.pathname+"/new"},"+ Add new"):"",n.a.createElement("input",{id:"search_field",type:"text",name:"query",placeholder:"Search by name",maxLength:"32",className:"input_field"}),n.a.createElement("input",{id:"search_submit_button",type:"image",src:"/images/search.png",alt:"Search"})),g.data&&g.data.length>0?n.a.createElement("div",{id:"item_container"},g.data.map((function(t,a){return n.a.createElement(c.b,{key:a,to:e.location.pathname+"/"+t.id,className:"item_box no_link"},n.a.createElement("img",{src:t.imageUrl,alt:"meal "+t.name,id:"item_image",className:"light_shadow"}),n.a.createElement("div",{className:"item_info"},n.a.createElement("div",{className:"item_name"},t.name),n.a.createElement("div",null,n.a.createElement("pre",{className:"item_description"},t.description))))}))):n.a.createElement("div",{className:"center"},g.query&&g.query>0?"Nothing was found. Try another search term.":"There's nothing to see at yet"),n.a.createElement(q,{pagesAmount:g.pagesAmount,cb:function(e){isNaN(e)||(g.page=Number(e),g.isLoaded=!1,f())},currentPage:g.page}))))}a(55);function oe(e){var t,a=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,data:{}}),o=Object(p.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)(I.Empty),u=Object(p.a)(l,2),d=u[0],m=u[1],g=Object(r.useState)(!1),b=Object(p.a)(g,2),E=b[0],f=b[1],h=Object(r.useState)(!1),y=Object(p.a)(h,2),_=y[0],N=y[1],S=e.match.params.id,k={message:"Are you sure?",onConfirm:function(){ee.deleteById(S).then((function(){m(I.Redirect("/menu"))}))},onDecline:function(){N(!1)}},x=O();return x||d!==I.Empty||m(I.Forbidden),x&&(t=x.role===M.UserRoles.Admin),document.body.className="background",document.title=s.data.name?s.data.name:"Item",s.loadingStatus===v.DataLoadingStatus.NotLoaded&&(s.loadingStatus=v.DataLoadingStatus.Loading,d!==I.Loading&&m(I.Loading),ee.getById(S).then((function(t){if(s.loadingStatus=v.DataLoadingStatus.Loaded,t.error===v.ErrorTypes.None)i({loadingStatus:v.DataLoadingStatus.Loaded,data:t.data.item}),m(I.Empty);else switch(t.error){case v.ErrorTypes.ConnecionError:m(I.ConnecionError);break;case v.ErrorTypes.NotFound:m(I.NotFound);break;case v.ErrorTypes.Unauthorized:m(I.Unauthorized(e.location.pathname));break;default:m(I.ServerError)}}))),n.a.createElement(n.a.Fragment,null,d!==I.Empty?n.a.createElement("div",{className:"center"},d):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"item_box",className:"table center card_view shadow"},n.a.createElement("div",{className:"item_subbox"},n.a.createElement("div",{className:"",id:"item_info"},n.a.createElement("div",{id:"item_name_box"},n.a.createElement("p",{id:"item_name"},s.data.name),t?n.a.createElement("div",null,n.a.createElement(c.b,{to:e.location.pathname+"/edit"},n.a.createElement("img",{alt:"edit",src:"/images/edit.png",className:"item_action_image"})),n.a.createElement("span",{onClick:function(){return N(!0)}},n.a.createElement("img",{alt:"edit",src:"/images/delete.png",className:"item_action_image"}))):""),n.a.createElement("p",{id:"item_weight"},s.data.weight?s.data.weight+" gr.":""),n.a.createElement("p",{id:"item_price"},s.data.price?"$"+s.data.price.toFixed(2):""),n.a.createElement("pre",{id:"item_description"},s.data.description),n.a.createElement("div",{className:"button light_shadow item_button",onClick:function(){M.addItemToCurrentOrder(x.id,S).then((function(e){f(!0)}))}},E?"Added":"Add to Order"))),n.a.createElement("div",{className:"item_subbox",id:"image_subbox"},n.a.createElement("img",{id:"image",src:s.data.imageUrl,alt:"meal "+s.name,className:"light_shadow"}))),_?n.a.createElement(B,k):""))}a(56);var se=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return v.makeARequest("/orders?page="+e+"&numberOfRecordsOnAPage="+t)}},{key:"getAmount",value:function(){return v.makeARequest("/orders?option=onlyAmount")}},{key:"deleteById",value:function(e){return v.makeARequest("/orders/"+e,v.Method.DELETE)}}]),e}();function ce(e){var t=3;document.body.className="background",document.title="Order history";var a=Object(r.useState)(I.Loading),o=Object(p.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)(!1),u=Object(p.a)(l,2),d=u[0],m=u[1],g=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,page:1,pagesAmount:0,data:[]}),b=Object(p.a)(g,2),E=b[0],f=b[1];return E.loadingStatus===v.DataLoadingStatus.NotLoaded&&(E.loadingStatus=v.DataLoadingStatus.Loading,s!==I.Loading&&i(I.Loading),se.getAll(E.page,t).then((function(a){if(E.isLoaded=v.DataLoadingStatus.Loaded,a.error)switch(a.error){case v.ErrorTypes.ConnecionError:i(I.ConnecionError);break;case v.ErrorTypes.Unauthorized:i(I.Unauthorized(e.location.pathname));break;default:i(I.ServerError)}else{var r=!0,n=!1,o=void 0;try{for(var s,c=a.data.orders[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;l.total=0;var u=!0,d=!1,m=void 0;try{for(var p,g=l.items[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var b=p.value;l.total+=b.price}}catch(h){d=!0,m=h}finally{try{u||null==g.return||g.return()}finally{if(d)throw m}}}}catch(h){n=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}f({page:E.page,loadingStatus:v.DataLoadingStatus.Loaded,pagesAmount:Math.ceil(a.data.amountOfRecords/t),data:a.data.orders}),i(I.Empty)}}))),0===E.data.length&&s===I.Empty&&E.data.loadingStatus===v.DataLoadingStatus.Loaded&&i(I.NothingToShow),n.a.createElement(n.a.Fragment,null,s!==I.Empty?n.a.createElement("div",{className:"center"},s):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"table card_view shadow",id:"order_table"},n.a.createElement("div",{className:"order_label_box"},n.a.createElement("p",{className:"emphasized",id:"order_label"},"Order history"),n.a.createElement("div",{className:"button_outter order_action_button_outter"},n.a.createElement("div",{className:"button",onClick:function(){return m(!d)}},d?"Exit":"Delete order..."))),n.a.createElement("div",{id:"order_container"},E.data.map((function(t,a){return n.a.createElement("div",{key:a,className:"order_box_outter"},n.a.createElement("div",{className:"card_view shadow order_box_inner"},n.a.createElement("div",{className:"order_item_box"},t.items.map((function(e,t){return n.a.createElement(c.b,{to:"/menu/"+e.id,key:t,className:"no_link card_view light_shadow order_item"},n.a.createElement("div",{className:"order_item_name"},e.name),"$"+e.price.toFixed(2))}))),n.a.createElement("div",{className:"order_total_price_box"},n.a.createElement("div",{className:"order_price"},"Total :"),"$"+t.total.toFixed(2))),d?n.a.createElement("div",{className:"order_delete_layout",onClick:function(t){return a=t.target.getAttribute("order_id"),void se.deleteById(a).then((function(t){if(t.error===v.ErrorTypes.None)f({loadingStatus:v.DataLoadingStatus.NotLoaded,page:E.data.length>1?E.page:1,pagesAmount:0,data:[]});else switch(t.error){case v.ErrorTypes.NotFound:f({loadingStatus:v.DataLoadingStatus.NotLoaded,page:E.data.length>1?E.page:1,pagesAmount:0,data:[]});break;case v.ErrorTypes.Unauthorized:i(I.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:i(I.ConnecionError);break;default:i(I.ServerError)}}));var a}},n.a.createElement("div",{order_id:t.id,className:"order_delete_image_box"},n.a.createElement("img",{order_id:t.id,className:"order_delete_image",alt:"delete",src:"/images/delete.png"}))):"")}))),n.a.createElement(q,{pagesAmount:E.pagesAmount,cb:function(e){isNaN(e)||f({loadingStatus:v.DataLoadingStatus.NotLoaded,page:Number(e),pagesAmount:0,data:[]})},currentPage:E.page}))))}var ie=Object.assign({ImageTooLarge:"Selected image is too large. Max image size 5mb."},I);function le(e){var t=Object(r.useState)(ie.Empty),a=Object(p.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)({inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"name",maxLength:"32",placeholder:"Name"}},{type:C.InputType.TextArea,props:{required:!0,type:"text",name:"description",maxLength:"512",placeholder:"Description"}},{type:C.InputType.Multiple,inputs:[{type:C.InputType.Text,props:{required:!0,type:"number",name:"weight",maxLength:"32",placeholder:"Weight"}},{type:C.InputType.Text,props:{required:!0,type:"number",name:"price",maxLength:"32",placeholder:"Price"}}]},{type:C.InputType.File,label:"Upload item image",props:{type:"file",name:"image",id:"form_image_input",accept:"image/jpeg"}}],cb:function(e){return f.apply(this,arguments)},labels:{message:{text:ie.Empty,color:C.MessageColor.Default},legend:"Add new item"}}),i=Object(p.a)(c,2),l=i[0],u=i[1],g=O();if(!g)return ie.Unauthorized(e.location.pathname);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.MessageColor.Default,a=Object.assign({},l);a.labels.message={text:e,color:t},u(a)}function E(e){e?(document.getElementById("submit_button").style.opacity=.5,document.getElementById("submit_button").style["pointer-events"]="none"):(document.getElementById("submit_button").style.opacity=1,document.getElementById("submit_button").style["pointer-events"]="auto")}function f(){return(f=Object(m.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(ie.Empty),E(!0),r=new FormData(a),t.next=5,ee.insert(r);case 5:if(n=t.sent,E(!1),n.error===v.ErrorTypes.None){t.next=24;break}t.t0=n.error,t.next=t.t0===v.ErrorTypes.Unauthorized?11:t.t0===v.ErrorTypes.ConnecionError?13:t.t0===v.ErrorTypes.NotAcceptable?15:22;break;case 11:return s(ie.Unauthorized(e.location.pathname)),t.abrupt("break",23);case 13:return b(ie.ConnectionError,C.MessageColor.Red),t.abrupt("break",23);case 15:t.t1=n.data.error_code,t.next=1===t.t1?18:20;break;case 18:return b(ie.ImageTooLarge,C.MessageColor.Red),t.abrupt("break",21);case 20:return t.abrupt("break",21);case 21:return t.abrupt("break",23);case 22:b(ie.ServerError,C.MessageColor.Red);case 23:return t.abrupt("return");case 24:b(ie.Saved,C.MessageColor.Green),setTimeout((function(){s(ie.Redirect("/menu"))}),2700);case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return!g.role===M.UserRoles.Admin&&s(ie.Forbidden),document.body.className="background",document.title="Create item",n.a.createElement("div",{className:"center"},o&&""!==o?o:n.a.createElement(C,l))}a(57);var ue=Object.assign({ImageTooLarge:"Selected image is too large. Max image size 5mb."},I);function de(e){document.body.className="background",document.title="Settings";var t=Object(r.useState)(ue.Empty),a=Object(p.a)(t,2),o=a[0],s=a[1],i=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,data:{}}),l=Object(p.a)(i,2),u=l[0],d=l[1],m=Object(r.useState)({text:ue.Empty,color:C.MessageColor.Default}),g=Object(p.a)(m,2),b=g[0],E=g[1],f=O();if(f||o!==ue.Empty||s(ue.Unauthorized(e.location.pathname)),f&&f.role!==M.UserRoles.Admin&&o===ue.Empty&&s(ue.Forbidden),f&&f.role===M.UserRoles.Admin){u.loadingStatus===v.DataLoadingStatus.NotLoaded&&(u.loadingStatus=v.DataLoadingStatus.Loading,Z.get().then((function(e){e.error?s(ue.ServerError):d({loadingStatus:v.DataLoadingStatus.Loaded,data:e.data.restaurant})})))}function h(e){E({text:ue.Empty,color:C.MessageColor.Default});var t=new FormData(e);Z.set(t).then((function(e){e.error?E({text:ue.ServerError,color:C.MessageColor.Red}):E({text:ue.Saved,color:C.MessageColor.Green})}))}return n.a.createElement("div",{className:"center"},o!==ue.Empty?o:n.a.createElement(n.a.Fragment,null,n.a.createElement(C,{inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"restaurant_name",maxLength:"32",pattern:"^[a-zA-Z0-9]+$",placeholder:"Restaurant name",className:"input_field form_input",defaultValue:u.data.name}},{type:C.InputType.Text,props:{required:!0,type:"text",name:"restaurant_contacts",maxLength:"32",placeholder:"Contacts",className:"input_field form_input",defaultValue:u.data.contacts}},{type:C.InputType.Text,props:{required:!0,type:"text",name:"restaurant_address",maxLength:"32",placeholder:"Address",className:"input_field form_input",defaultValue:u.data.address}},{type:C.InputType.File,label:"Upload logo",props:{type:"file",name:"image",id:"form_image_input",accept:"image/jpeg"}}],cb:h,labels:{message:b,legend:"Settings"}}),n.a.createElement("div",{className:"button_outter",id:"settings_manage_button"},n.a.createElement(c.b,{className:"button light_shadow no_link",to:"/restaurants/"+u.id+"/rooms"},"Manage the rooms"))))}a(58);var me=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"getAll",value:function(e,t,a){return v.makeARequest("/rooms?page="+e+"&numberOfRecordsOnAPage="+t+"&restaurant_id="+a)}},{key:"getById",value:function(e){return v.makeARequest("/rooms/"+e)}},{key:"deleteById",value:function(e){return v.makeARequest("/rooms/"+e,v.Method.DELETE)}},{key:"insert",value:function(e){return v.makeARequest("/rooms",v.Method.POST,e)}},{key:"updateById",value:function(e,t){return v.makeARequest("/rooms/"+e,v.Method.PUT,t)}}]),e}();function pe(e){document.body.className="background",document.title="About";var t=e.match.params.restaurant_id,a=Object(r.useState)(I.Empty),o=Object(p.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,page:1,pagesAmount:0,data:[]}),u=Object(p.a)(l,2),d=u[0],m=u[1],g=O();if(g||s!==I.Empty||i(I.Unauthorized(e.location.pathname)),g&&g.role!==M.UserRoles.Admin&&s===I.Empty&&i(I.Forbidden),g&&g.role!==M.UserRoles.Admin){d.loadingStatus===v.DataLoadingStatus.NotLoaded&&(d.loadingStatus=v.DataLoadingStatus.Loading,me.getAll(d.page,6,t).then((function(t){if(t.error)switch(t.error){case v.ErrorTypes.Forbidden:i(I.Forbidden);break;case v.ErrorTypes.Unauthorized:i(I.Unauthorized(e.location.pathname));break;default:i(I.ServerError)}else m({loadingStatus:v.DataLoadingStatus.Loaded,page:d.page,pagesAmount:Math.ceil(t.data.numberOfRecords/6),data:t.data.rooms})})))}function b(t){return n.a.createElement(c.b,{className:"card_view light_shadow room_cell no_link",to:e.location.pathname+"/"+t.id},n.a.createElement("div",{className:"room_name_label"},t.name),n.a.createElement("div",{className:"room_tables_label"},t.amountOfTables+" table"+(1!==t.amountOfTables?"s":"")),n.a.createElement("div",{className:"room_description_label"},t.description))}return 0===d.data.length&&s===I.Empty&&d.data.loadingStatus===v.DataLoadingStatus.Loaded&&i(I.NothingToShow),s!==I.Empty?n.a.createElement("div",{className:"center"},s):n.a.createElement("div",{className:"table card_view shadow",id:"order_table"},n.a.createElement("div",{className:"room_label_box"},n.a.createElement("p",{className:"emphasized",id:"room_label"},"Rooms"),n.a.createElement("div",{className:"button_outter room_action_button_outter"},n.a.createElement(c.b,{className:"button no_link",to:e.location.pathname+"/new"},"Add new"))),n.a.createElement("div",{className:"rooms_row"},d.data.slice(0,3).map((function(e,t){return b(e)}))),n.a.createElement("div",{className:"rooms_row rooms_second_row"},d.data.slice(3,6).map((function(e,t){return b(e)}))),n.a.createElement(q,{pagesAmount:d.pagesAmount,cb:function(e){isNaN(e)||m({loadingStatus:v.DataLoadingStatus.NotLoaded,page:Number(e),pagesAmount:0,data:[]})},currentPage:d.page}))}function ge(e){var t=e.match.params.restaurant_id,a=Object(r.useState)(I.Empty),o=Object(p.a)(a,2),s=o[0],c=o[1],i=Object(r.useState)(I.Empty),l=Object(p.a)(i,2),u=l[0],g=l[1];var b=O();function E(e){e?(document.getElementById("submit_button").style.opacity=.5,document.getElementById("submit_button").style["pointer-events"]="none"):(document.getElementById("submit_button").style.opacity=1,document.getElementById("submit_button").style["pointer-events"]="auto")}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(m.a)(d.a.mark((function a(r){var n,o,s,i,l,u,m,p;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(g({text:I.Empty,color:C.MessageColor.Default}),E(!0),(n=new FormData(r)).set("restaurant_id",t),o=!0,s=!1,i=void 0,a.prev=7,l=n.keys()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)m=u.value,console.log(m);a.next=15;break;case 11:a.prev=11,a.t0=a.catch(7),s=!0,i=a.t0;case 15:a.prev=15,a.prev=16,o||null==l.return||l.return();case 18:if(a.prev=18,!s){a.next=21;break}throw i;case 21:return a.finish(18);case 22:return a.finish(15);case 23:return a.next=25,me.insert(n);case 25:if(p=a.sent,E(!1),p.error===v.ErrorTypes.None){a.next=37;break}a.t1=p.error,a.next=a.t1===v.ErrorTypes.Unauthorized?31:a.t1===v.ErrorTypes.ConnecionError?33:35;break;case 31:return c(I.Unauthorized(e.location.pathname)),a.abrupt("break",36);case 33:return g({text:I.ConnectionError,color:C.MessageColor.Red}),a.abrupt("break",36);case 35:g({text:I.ServerError,color:C.MessageColor.Red});case 36:return a.abrupt("return");case 37:g({text:I.Saved,color:C.MessageColor.Green});case 38:case"end":return a.stop()}}),a,null,[[7,11,15,23],[16,,18,22]])})))).apply(this,arguments)}return b||s!==I.Empty||c(I.Unauthorized(e.location.pathname)),b.role!==M.UserRoles.Admin&&s===I.Empty&&c(I.Forbidden),document.body.className="background",document.title="Create room",n.a.createElement("div",{className:"center"},s&&""!==s?s:n.a.createElement(C,{inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"name",maxLength:"16",placeholder:"Room name"}},{type:C.InputType.TextArea,props:{required:!0,type:"text",name:"description",maxLength:"64",placeholder:"Description"}}],cb:f,labels:{message:u,legend:"Add new room"}}))}a(59);function be(e){var t=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,data:{size:{height:8,width:8}}}),a=Object(p.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(I.Empty),i=Object(p.a)(c,2),l=i[0],u=i[1],d=Object(r.useState)({text:I.Empty,color:C.MessageColor.Default}),m=Object(p.a)(d,2),g=m[0],b=m[1],E=Object(r.useState)(!1),f=Object(p.a)(E,2),h=f[0],y=f[1],_=e.match.params.restaurant_id,N=e.match.params.room_id,S={message:"Are you sure?",onConfirm:function(){me.deleteById(N).then((function(){u(I.Redirect("/restaurants/"+_+"/rooms"))}))},onDecline:function(){y(!1)}},k=O();if(k)if(k.role!==M.UserRoles.Admin)u(I.Forbidden);else{o.loadingStatus===v.DataLoadingStatus.NotLoaded&&(o.loadingStatus=v.DataLoadingStatus.Loading,me.getById(N).then((function(t){if(o.loadingStatus=v.DataLoadingStatus.Loaded,t.error)switch(t.error){case v.ErrorTypes.ConnecionError:u(I.ConnecionError);break;case v.ErrorTypes.NotFound:u(I.NotFound);break;case v.ErrorTypes.Unauthorized:u(I.Unauthorized(e.location.pathname));break;default:u(I.ServerError)}else console.log(t.data.room),s({loadingStatus:v.DataLoadingStatus.Loaded,data:t.data.room})})))}else u(I.Unauthorized(e.location.pathname));function x(e){me.updateById(N,new FormData(e)).then((function(e){e.error&&b({text:I.ServerError,color:C.MessageColor.Red}),b({text:I.Saved,color:C.MessageColor.Green})}))}return document.body.className="background",document.title=o.data.name?o.data.name:"Room",l!==I.Empty?n.a.createElement("div",{className:"center"},l):n.a.createElement("div",{className:"center"},n.a.createElement(C,{inputs:[{type:C.InputType.Text,props:{required:!0,type:"text",name:"name",maxLength:"16",placeholder:"Room name",defaultValue:o.data.name}},{type:C.InputType.TextArea,props:{required:!0,type:"text",name:"description",maxLength:"64",placeholder:"Description",defaultValue:o.data.description}},{type:C.InputType.Text,props:{required:!0,type:"number",name:"amountOfTables",maxLength:"16",placeholder:"Amount of tables",defaultValue:o.data.amountOfTables}},{type:C.InputType.Button,label:"Delete",onClick:function(){return y(!0)}}],cb:x,labels:{message:g,legend:"Edit room"}}),h?n.a.createElement(B,S):"")}a(60);function Ee(e){document.body.className="background",document.title="My Order";var t,a=Object(r.useState)(I.Loading),o=Object(p.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)({loadingStatus:v.DataLoadingStatus.NotLoaded,data:{totalPrice:0}}),u=Object(p.a)(l,2),d=u[0],m=u[1],b=O();b&&(t=b.id);var E=g.parse(e.location.search);if(E.user_id&&b.role!==M.UserRoles.User&&(t=String(E.user_id)),b||s!==I.Empty){d.loadingStatus===v.DataLoadingStatus.NotLoaded&&(d.loadingStatus=v.DataLoadingStatus.Loading,s!==I.Loading&&i(I.Loading),M.getById(t).then((function(t){if(t.error)switch(t.error){case v.ErrorTypes.Unauthorized:i(I.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:i(I.ConnecionError);break;case v.ErrorTypes.NotFound:i(I.NotFound);break;default:i(I.ServerError)}else{var a=t.data.user.currentOrder;if(a){a.totalPrice=0;var r=!0,n=!1,o=void 0;try{for(var s,c=a.items[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a.totalPrice+=l.price}}catch(u){n=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}}m({loadingStatus:v.DataLoadingStatus.Loaded,data:a}),i(I.Empty)}})))}else i(I.Unauthorized(e.location.pathname));return s!==I.Empty?n.a.createElement("div",{className:"center"},s):d.data?n.a.createElement("div",{id:"order_main_box",className:"table center card_view shadow"},n.a.createElement("div",{id:"order_item_list"},d.data.items&&0!==d.data.items.length?d.data.items.map((function(e,t){return n.a.createElement(c.b,{to:"/menu/"+e._id,key:t,id:"order_item_box",className:"no_link card_view light_shadow"},n.a.createElement("div",null,e.name),n.a.createElement("div",null,"$"+e.price.toFixed(2)))})):n.a.createElement("div",{id:"no_items_label_box"},n.a.createElement("div",{id:"no_items_label"},"You've got no items for now. Browse our ",n.a.createElement(c.b,{className:"no_link",to:"/menu"},"Menu")," page."))),n.a.createElement("div",{id:"order_total_price_box"},n.a.createElement("div",null,"Total:"),n.a.createElement("div",{id:"order_total_price_label"},"$"+d.data.totalPrice.toFixed(2))),n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:function(){M.callWaiter(b.id)}},"Call waiter")),b.role!==M.UserRoles.User?n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:function(){M.setCurrentOrderCompleted(t).then((function(){return i(I.Redirect("/users/"+t))}))}},"Order completed")):""):n.a.createElement("div",{className:"center"},"You've not started Your Order",n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:function(){M.startNewOrder(t).then((function(t){if(t.error)switch(t.error){case v.ErrorTypes.Unauthorized:i(I.Unauthorized(e.location.pathname));break;case v.ErrorTypes.ConnecionError:i(I.ConnecionError);break;default:i(I.ServerError)}else{var a=t.data.new_order;if(a){a.totalPrice=0;var r=!0,n=!1,o=void 0;try{for(var s,c=a.items[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a.totalPrice+=l.price}}catch(u){n=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}}m({loadingStatus:v.DataLoadingStatus.Loaded,data:a})}}))}},"Start new Order")))}function fe(e){document.body.className="background",document.title="Auth";var t=Object(r.useState)(I.Empty),a=Object(p.a)(t,2),o=a[0],s=a[1],c=O(),i=g.parse(e.location.search);function l(){return(l=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getById(c.id);case 3:return t=e.sent.data.user,console.log(t),t.telegramId=i.id,e.next=8,M.update(t);case 8:s(I.Successfully),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return c.role!==M.UserRoles.User&&i.id||s(I.Forbidden),n.a.createElement("div",{className:"center"},o!==I.Empty?o:n.a.createElement("div",{className:"text_container"},"Are you sure you want to link this telegram to Your account?",n.a.createElement("div",{className:"button_outter"},n.a.createElement("div",{className:"button",onClick:function(){return l.apply(this,arguments)}},"Yes"))))}var he=function(){return n.a.createElement(c.a,null,n.a.createElement(J,null),n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/",exact:!0,component:l}),n.a.createElement(i.b,{path:"/auth/register",exact:!0,component:$}),n.a.createElement(i.b,{path:"/auth/login",exact:!0,component:R}),n.a.createElement(i.b,{path:"/menu",exact:!0,component:ne}),n.a.createElement(i.b,{path:"/menu/new",exact:!0,component:le}),n.a.createElement(i.b,{path:"/menu/:id",exact:!0,component:oe}),n.a.createElement(i.b,{path:"/menu/:id/edit",exact:!0,component:ae}),n.a.createElement(i.b,{path:"/users",exact:!0,component:P}),n.a.createElement(i.b,{path:"/users/:id",exact:!0,component:W}),n.a.createElement(i.b,{path:"/users/:id/edit",exact:!0,component:X}),n.a.createElement(i.b,{path:"/orders",exact:!0,component:ce}),n.a.createElement(i.b,{path:"/about",exact:!0,component:H}),n.a.createElement(i.b,{path:"/order",exact:!0,component:Ee}),n.a.createElement(i.b,{path:"/settings",exact:!0,component:de}),n.a.createElement(i.b,{path:"/bot/auth",exact:!0,component:fe}),n.a.createElement(i.b,{path:"/restaurants/:restaurant_id/rooms",exact:!0,component:pe}),n.a.createElement(i.b,{path:"/restaurants/:restaurant_id/rooms/new",exact:!0,component:ge}),n.a.createElement(i.b,{path:"/restaurants/:restaurant_id/rooms/:room_id",exact:!0,component:be}),n.a.createElement(i.b,{path:"/not_found",exact:!0,component:Y}),n.a.createElement(i.b,{path:"/",component:Y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.fb961a57.chunk.js.map